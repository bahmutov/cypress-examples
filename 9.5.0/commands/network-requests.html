<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Network Requests | Cypress examples (v9.5.0)</title>
    <meta name="description" content="Static site with Cypress examples tested right from the Markdown sources">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <style>.action-focus.focus { border: 5px solid orange; } .hidden { display: none !important; }</style>
  <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    
    <link rel="preload" href="/cypress-examples/9.5.0/assets/css/0.styles.f1e16f3d.css" as="style"><link rel="preload" href="/cypress-examples/9.5.0/assets/js/app.5086b7ee.js" as="script"><link rel="preload" href="/cypress-examples/9.5.0/assets/js/3.f0d716cf.js" as="script"><link rel="preload" href="/cypress-examples/9.5.0/assets/js/21.5eef1378.js" as="script"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/10.1ff4e75a.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/11.09469d41.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/12.9e852813.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/13.2e768308.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/14.da8b09b8.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/15.e35ab30a.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/16.6106b0cf.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/17.ebc73354.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/18.09824f9f.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/19.f416b6af.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/20.645cba4e.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/22.28e103f9.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/23.43fb3060.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/24.e6f3a219.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/25.aef0f3df.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/26.6da2f0bc.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/27.14b1845b.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/28.a3ffd796.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/29.20eae8bd.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/30.d4655471.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/31.677e787a.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/32.9ab6afb4.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/33.800c5bb1.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/34.408f8f59.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/35.5b6f4880.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/36.6b408a4b.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/37.1a839347.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/38.f4ab6f3f.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/39.c421b04d.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/4.e899a18b.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/40.9aaf626f.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/41.7ea946ed.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/42.62d17cde.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/43.53f66931.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/44.1f5d9605.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/45.c1011788.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/46.c77a3f09.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/47.f9a8e057.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/48.64ad4848.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/49.a21bdd57.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/5.1b0bafbf.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/50.3eea6bf8.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/51.a9731016.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/52.8e39031a.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/53.8a282fcf.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/54.d81cdae1.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/55.b8a6c7e2.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/56.05add3c9.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/57.1e0e50e0.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/58.d6072b42.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/59.8d3de48e.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/6.dc827464.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/60.586505d5.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/61.57f15581.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/62.13561ec5.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/63.81cc08ad.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/64.1f325d35.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/65.c08931d5.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/66.e45c9890.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/67.b95691bb.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/68.3ad5b552.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/69.7126219c.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/7.80894461.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/70.4f89dbb6.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/71.adebff57.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/72.a5bc5434.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/73.af15272e.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/74.c8f2ce2f.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/75.af54c382.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/76.0d1b5fec.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/77.edf6b7d3.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/78.6571e85c.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/79.3e4aaf26.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/8.5834f1c5.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/80.355ca430.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/81.2497628b.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/82.a468c676.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/83.b573bcee.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/84.fd2fe584.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/9.e78e4bfb.js"><link rel="prefetch" href="/cypress-examples/9.5.0/assets/js/vendors~docsearch.4c6aa31e.js">
    <link rel="stylesheet" href="/cypress-examples/9.5.0/assets/css/0.styles.f1e16f3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cypress-examples/9.5.0/" class="home-link router-link-active"><!----> <span class="site-name">Cypress examples (v9.5.0)</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/9.5.0/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/9.5.0/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/9.5.0/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/9.5.0/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/9.5.0/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Network Requests</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-server" class="sidebar-link">cy.server()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-request" class="sidebar-link">cy.request()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#making-a-request" class="sidebar-link">Making a request</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#assert-a-returned-header" class="sidebar-link">Assert a returned header</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#request-with-query-parameters" class="sidebar-link">Request with query parameters</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#making-multiple-requests" class="sidebar-link">Making multiple requests</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#using-the-shared-test-context" class="sidebar-link">Using the shared test context</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/9.5.0/commands/network-requests.html#handle-404" class="sidebar-link">Handle 404</a></li></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-route" class="sidebar-link">cy.route()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-intercept" class="sidebar-link">cy.intercept()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-intercept-duration" class="sidebar-link">cy.intercept duration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#cy-intercept-number" class="sidebar-link">cy.intercept number</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/9.5.0/commands/network-requests.html#see-also" class="sidebar-link">See also</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="network-requests"><a href="#network-requests" class="header-anchor">#</a> Network Requests</h1> <p>Examples of handling AJAX or XHR requests in Cypress, for a full reference of commands, go to <a href="https://on.cypress.io/api" target="_blank" rel="noopener noreferrer">docs.cypress.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="cy-server"><a href="#cy-server" class="header-anchor">#</a> <a href="https://on.cypress.io/server" target="_blank" rel="noopener noreferrer">cy.server()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><em>Deprecated</em> in Cypress v6</p> <p>To control the behavior of network requests and responses, use the <code>cy.server()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/server</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// the default options on server</span>
  <span class="token comment">// you can override any of these options</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onRequest<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onResponse<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onAbort<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined

  <span class="token comment">// These options control the server behavior</span>
  <span class="token comment">// affecting all requests</span>

  <span class="token comment">// pass false to disable existing route stubs</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>enable<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token comment">// forces requests that don't match your routes to 404</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>force404<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
  <span class="token comment">// preserve requests from ever being logged or stubbed</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>ignore<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'function'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token number">422</span><span class="token punctuation">,</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// any route commands will now inherit the above options</span>
<span class="token comment">// from the server. anything we pass specifically</span>
<span class="token comment">// to route will override the defaults though.</span>
</code></pre></div> <h2 id="cy-request"><a href="#cy-request" class="header-anchor">#</a> <a href="https://on.cypress.io/request" target="_blank" rel="noopener noreferrer">cy.request()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>Cypress tests run in the browser, but through <a href="https://on.cypress.io/request" target="_blank" rel="noopener noreferrer">cy.request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> command the tests can do HTTP requests without cross-domain restrictions. For more information, read <a href="https://glebbahmutov.com/blog/cypress-request-and-cookies/" target="_blank" rel="noopener noreferrer">Cypress request and cookies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://glebbahmutov.com/blog/network-requests-with-cypress/" target="_blank" rel="noopener noreferrer">How To Check Network Requests Using Cypress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="making-a-request"><a href="#making-a-request" class="header-anchor">#</a> Making a request</h3> <p>To make an XHR request, use the <code>cy.request()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/request</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token comment">// the server sometimes gets an extra comment posted from another machine</span>
    <span class="token comment">// which gets returned as 1 extra object</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>and<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">501</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'headers'</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'duration'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div> <h3 id="assert-a-returned-header"><a href="#assert-a-returned-header" class="header-anchor">#</a> Assert a returned header</h3> <p>From the response, you can get the individual headers.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/todos/1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'headers'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">responseHeaders</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>responseHeaders<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span>
      <span class="token string">'x-powered-by'</span><span class="token punctuation">,</span>
      <span class="token string">'Express'</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="request-with-query-parameters"><a href="#request-with-query-parameters" class="header-anchor">#</a> Request with query parameters</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// will execute request</span>
<span class="token comment">// https://jsonplaceholder.cypress.io/comments?postId=1&amp;id=3</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">'https://jsonplaceholder.cypress.io/comments'</span><span class="token punctuation">,</span>
  qs<span class="token operator">:</span> <span class="token punctuation">{</span>
    postId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.an'</span><span class="token punctuation">,</span> <span class="token string">'array'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">'have.length'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields first element of the array</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    postId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="making-multiple-requests"><a href="#making-multiple-requests" class="header-anchor">#</a> Making multiple requests</h3> <p>A request can pass the response data to the next request.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// first, let's find out the userId of the first user we have</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/users?_limit=1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span> <span class="token comment">// yields the response object</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields the first element of the returned list</span>
  <span class="token comment">// the above two commands its('body').its('0')</span>
  <span class="token comment">// can be written as its('body.0')</span>
  <span class="token comment">// if you do not care about TypeScript checks</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
    <span class="token comment">// make a new post on behalf of the user</span>
    cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>
      <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token string">'https://jsonplaceholder.cypress.io/posts'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        userId<span class="token operator">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
        body<span class="token operator">:</span>
          <span class="token string">'Fast, easy and reliable testing for anything that runs in a browser.'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// note that the value here is the returned value of the 2nd request</span>
  <span class="token comment">// which is the new post object</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span> <span class="token comment">// new entity created</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// we don't know the exact post id - only that it will be &gt; 100</span>
    <span class="token comment">// since JSONPlaceholder has built-in 100 posts</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>and<span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token comment">// we don't know the user id here - since it was in above closure</span>
    <span class="token comment">// so in this test just confirm that the property is there</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'userId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="using-the-shared-test-context"><a href="#using-the-shared-test-context" class="header-anchor">#</a> Using the shared test context</h3> <p>A good idea is to save the response data to be used later in the shared test context.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/variables-and-aliases</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/users?_limit=1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields the first element of the returned list</span>
  <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span> <span class="token comment">// saves the object in the test context</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// NOTE 👀</span>
    <span class="token comment">//  By the time this callback runs the &quot;as('user')&quot; command</span>
    <span class="token comment">//  has saved the user object in the test context.</span>
    <span class="token comment">//  To access the test context we need to use</span>
    <span class="token comment">//  the &quot;function () { ... }&quot; callback form,</span>
    <span class="token comment">//  otherwise &quot;this&quot; points at a wrong or undefined object!</span>
    cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>
      <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token string">'https://jsonplaceholder.cypress.io/posts'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        userId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
        body<span class="token operator">:</span>
          <span class="token string">'Fast, easy and reliable testing for anything that runs in a browser.'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">)</span> <span class="token comment">// save the new post from the response</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// When this callback runs, both &quot;cy.request&quot; API commands have finished</span>
    <span class="token comment">// and the test context has &quot;user&quot; and &quot;post&quot; objects set.</span>
    <span class="token comment">// Let's verify them.</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>post<span class="token punctuation">,</span> <span class="token string">'post has the right user id'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'userId'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="handle-404"><a href="#handle-404" class="header-anchor">#</a> Handle 404</h3> <p>The <code>cy.request</code> command automatically fails if the server responds with an error code. You can allow the requests to fail and handle the response yourself.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> serverUrl <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>serverUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/todos/does-not-exist</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  failOnStatusCode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">,</span> <span class="token number">404</span><span class="token punctuation">)</span>
  <span class="token comment">// our server returns an empty object if the Todo is not found</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <p>Watch the explanation in the video <a href="https://youtu.be/Ck5MutpVOQo" target="_blank" rel="noopener noreferrer">Handle 404 Status Code In cy.request Command<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and check out the recipe <a href="/cypress-examples/9.5.0/recipes/request-not-found.html">Requested resource not found</a>.</p> <h2 id="cy-route"><a href="#cy-route" class="header-anchor">#</a> <a href="https://on.cypress.io/route" target="_blank" rel="noopener noreferrer">cy.route()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><em>Deprecated</em> in Cypress v6</p> <p>To route responses to matching requests, use the <code>cy.route()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Get Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-post btn btn-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Post Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-post-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-put btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Update Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-put-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">postComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using POST in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-post-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'POST successful!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">putComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using PUT in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        statusCode<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token number">404</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
              data<span class="token punctuation">.</span>responseJSON<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">getComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">postComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">putComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-route-btn btn btn-primary">
  Get Comment
</button> <div class="network-route-comment"></div> <button class="network-route-post btn btn-success">
  Post Comment
</button> <div class="network-route-post-comment"></div> <button class="network-route-put btn btn-warning">
  Update Comment
</button> <div class="network-route-put-comment"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-route-comment').text(data.body)
      })
    }

    function postComment() {
      $.ajax({
        url: `${root}/comments`,
        method: 'POST',
        data: {
          name: 'Using POST in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
      }).then(function () {
        $('.network-route-post-comment').text('POST successful!')
      })
    }

    function putComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'PUT',
        data: {
          name: 'Using PUT in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
        statusCode: {
          404(data) {
            $('.network-route-put-comment').text(
              data.responseJSON.error,
            )
          },
        },
      })
    }

    $('.network-route-btn').on('click', function (e) {
      e.preventDefault()
      getComment(e)
    })

    $('.network-route-post').on('click', function (e) {
      e.preventDefault()
      postComment(e)
    })

    $('.network-route-put').on('click', function (e) {
      e.preventDefault()
      putComment(e)
    })
  })()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/route</span>

<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'whoa, this comment does not exist'</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Listen to GET to comments/1</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'comments/*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that gets a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>on<span class="token punctuation">.</span>cypress<span class="token punctuation">.</span>io<span class="token operator">/</span>wait
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@getComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'eq'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> the request has duration <span class="token keyword">in</span> milliseconds
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'@getComment'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.property'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">'be.a'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Listen to <span class="token constant">POST</span> to comments
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'postComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> we have code that posts a comment when
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@postComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">xhr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>requestBody<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>requestHeaders<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseBody<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span>
    <span class="token string">'name'</span><span class="token punctuation">,</span>
    <span class="token string">'Using POST in cy.route()'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Stub a response to <span class="token constant">PUT</span> <span class="token string">&quot;comments/*&quot;</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">'comments/*'</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'putComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that puts a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@putComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> our <span class="token number">404</span> statusCode logic <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js executed
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
</code></pre></div> <h2 id="cy-intercept"><a href="#cy-intercept" class="header-anchor">#</a> <a href="https://on.cypress.io/intercept" target="_blank" rel="noopener noreferrer">cy.intercept()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To route responses to matching requests, use the <code>cy.intercept()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Get Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-post btn btn-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Post Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-post-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-put btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Update Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-put-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-delete btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Delete Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-delete-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">postComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using POST in cy.intercept()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.intercept() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-post-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'POST successful!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">putComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using PUT in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        statusCode<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token number">404</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
              data<span class="token punctuation">.</span>responseJSON<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">deleteComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'DELETE'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-delete-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Comment deleted!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">getComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">postComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">putComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">deleteComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-btn btn btn-primary">Get Comment</button> <div class="network-comment"></div> <button class="network-post btn btn-success">
  Post Comment
</button> <div class="network-post-comment"></div> <button class="network-put btn btn-warning">
  Update Comment
</button> <div class="network-put-comment"></div> <button class="network-delete btn btn-warning">
  Delete Comment
</button> <div class="network-delete-comment"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-comment').text(data.body)
      })
    }

    function postComment() {
      $.ajax({
        url: `${root}/comments`,
        method: 'POST',
        data: {
          name: 'Using POST in cy.intercept()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.intercept() to be GET, POST, PUT, PATCH, or DELETE',
        },
      }).then(function () {
        $('.network-post-comment').text('POST successful!')
      })
    }

    function putComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'PUT',
        data: {
          name: 'Using PUT in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
        statusCode: {
          404(data) {
            $('.network-put-comment').text(
              data.responseJSON.error,
            )
          },
        },
      })
    }

    function deleteComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'DELETE',
      }).then(function () {
        $('.network-delete-comment').text('Comment deleted!')
      })
    }

    $('.network-btn').on('click', function (e) {
      e.preventDefault()
      getComment(e)
    })

    $('.network-post').on('click', function (e) {
      e.preventDefault()
      postComment(e)
    })

    $('.network-put').on('click', function (e) {
      e.preventDefault()
      putComment(e)
    })

    $('.network-delete').on('click', function (e) {
      e.preventDefault()
      deleteComment(e)
    })
  })()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/intercept</span>

<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'whoa, this comment does not exist'</span>

<span class="token comment">// Listen to GET to comments/1</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that gets a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>on<span class="token punctuation">.</span>cypress<span class="token punctuation">.</span>io<span class="token operator">/</span>wait
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@getComment'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'response.statusCode'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.oneOf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">304</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Listen to <span class="token constant">POST</span> to comments
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'**/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'postComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that posts a comment when</span>
<span class="token comment">// the button is clicked in scripts.js</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@postComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> response <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>response <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span>
    <span class="token string">'name'</span><span class="token punctuation">,</span>
    <span class="token string">'Using POST in cy.intercept()'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Stub a response to PUT comments/ ****</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    statusCode<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'access-control-allow-origin'</span><span class="token operator">:</span> <span class="token string">'*'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    delayMs<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'putComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that puts a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@putComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> our <span class="token number">404</span> statusCode logic <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js executed
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> we can spy on requests that <span class="token keyword">do</span> not have a response body
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">,</span> <span class="token string">'/comments/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@delete'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'.network-delete-comment'</span><span class="token punctuation">,</span> <span class="token string">'Comment deleted!'</span><span class="token punctuation">)</span>
</code></pre></div> <h2 id="cy-intercept-duration"><a href="#cy-intercept-duration" class="header-anchor">#</a> cy.intercept duration</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-timed-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Get Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-comment-timed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-comment-timed'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-timed-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">getComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-timed-btn btn btn-primary">
  Get Comment
</button> <div class="network-comment-timed"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-comment-timed').text(data.body)
      })
    }

    $('.network-timed-btn').on('click', function (e) {
      e.preventDefault()
      getComment(e)
    })
  })()
</script></div></div><p>The intercepted call has basic properties like the request and the response. It does not have the &quot;duration&quot; property, but we can measure the network call's duration ourselves.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> duration
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> started <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  req<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// we are not interested in modifying the response</span>
    <span class="token operator">/</span><span class="token operator">/</span> just measuring the elapsed duration
    duration <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> started
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getCommentTimed'</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-timed-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@getCommentTimed'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'include.keys'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token string">'request'</span><span class="token punctuation">,</span>
  <span class="token string">'response'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> there is no <span class="token string">&quot;duration&quot;</span> property
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'@getCommentTimed'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'not.have.property'</span><span class="token punctuation">,</span> <span class="token string">'duration'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">/</span><span class="token operator">/</span> but the local variable duration should have been <span class="token keyword">set</span> by now
    <span class="token function">expect</span><span class="token punctuation">(</span>duration<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h2 id="cy-intercept-number"><a href="#cy-intercept-number" class="header-anchor">#</a> cy.intercept number</h2> <p>Let's say you want to confirm how many times a specific network intercept happens</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-count-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Get Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-count-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-count-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-count-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// fetch the comment after some random delay</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">1000</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-count-btn btn btn-primary">
  Get Comment
</button> <div class="network-count-comment"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-count-comment').text(data.body)
      })
    }

    $('.network-count-btn').on('click', function (e) {
      e.preventDefault()
      // fetch the comment after some random delay
      setTimeout(function () {
        getComment()
      }, 1000 + 1000 * Math.random())
    })
  })()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getComment'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-count-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// WRONG: unfortunately the &quot;getComment.all&quot; does NOT retry</span>
<span class="token operator">/</span><span class="token operator">/</span> thus the following command immediately fails
<span class="token operator">/</span><span class="token operator">/</span> cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'@getComment.all'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.length'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> you can use cypress<span class="token operator">-</span>recurse to retry <span class="token constant">OR</span> keep the count yourself
cy<span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token string">'network call count'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h2 id="see-also"><a href="#see-also" class="header-anchor">#</a> See also</h2> <p>See how to simulate network errors in the <a href="/cypress-examples/9.5.0/recipes/network-errors.html">Network errors</a> recipe.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bahmutov/cypress-examples/edit/master/docs/commands/network-requests.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cypress-examples/9.5.0/assets/js/app.5086b7ee.js" defer></script><script src="/cypress-examples/9.5.0/assets/js/3.f0d716cf.js" defer></script><script src="/cypress-examples/9.5.0/assets/js/21.5eef1378.js" defer></script>
  </body>
</html>
