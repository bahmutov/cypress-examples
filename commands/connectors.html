<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connectors | Cypress examples (v12.5.0)</title>
    <meta name="description" content="Static site with Cypress examples tested right from the Markdown sources">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <style>.action-focus.focus { border: 5px solid orange; } .hidden { display: none !important; }</style>
  <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    
    <link rel="preload" href="/cypress-examples/assets/css/0.styles.82419979.css" as="style"><link rel="preload" href="/cypress-examples/assets/js/app.874ff1b6.js" as="script"><link rel="preload" href="/cypress-examples/assets/js/3.be46aa5a.js" as="script"><link rel="preload" href="/cypress-examples/assets/js/17.1eb3937e.js" as="script"><link rel="prefetch" href="/cypress-examples/assets/js/10.1d9ae544.js"><link rel="prefetch" href="/cypress-examples/assets/js/100.e4dcff87.js"><link rel="prefetch" href="/cypress-examples/assets/js/101.d7d0b9ca.js"><link rel="prefetch" href="/cypress-examples/assets/js/102.d779545b.js"><link rel="prefetch" href="/cypress-examples/assets/js/103.ae49fee8.js"><link rel="prefetch" href="/cypress-examples/assets/js/104.1c566367.js"><link rel="prefetch" href="/cypress-examples/assets/js/105.32748c31.js"><link rel="prefetch" href="/cypress-examples/assets/js/106.27312513.js"><link rel="prefetch" href="/cypress-examples/assets/js/107.44e43b45.js"><link rel="prefetch" href="/cypress-examples/assets/js/108.d6a5fc75.js"><link rel="prefetch" href="/cypress-examples/assets/js/109.e19a5e91.js"><link rel="prefetch" href="/cypress-examples/assets/js/11.838919b2.js"><link rel="prefetch" href="/cypress-examples/assets/js/110.26fce3f4.js"><link rel="prefetch" href="/cypress-examples/assets/js/111.266ed2c8.js"><link rel="prefetch" href="/cypress-examples/assets/js/112.42640b56.js"><link rel="prefetch" href="/cypress-examples/assets/js/113.1b459b4a.js"><link rel="prefetch" href="/cypress-examples/assets/js/114.247a47b3.js"><link rel="prefetch" href="/cypress-examples/assets/js/115.543082b5.js"><link rel="prefetch" href="/cypress-examples/assets/js/116.35b644c9.js"><link rel="prefetch" href="/cypress-examples/assets/js/117.deac6684.js"><link rel="prefetch" href="/cypress-examples/assets/js/118.491c9485.js"><link rel="prefetch" href="/cypress-examples/assets/js/119.61ba3e17.js"><link rel="prefetch" href="/cypress-examples/assets/js/12.95ecdd92.js"><link rel="prefetch" href="/cypress-examples/assets/js/120.1f7291fd.js"><link rel="prefetch" href="/cypress-examples/assets/js/121.7ebb8246.js"><link rel="prefetch" href="/cypress-examples/assets/js/122.3ae9c581.js"><link rel="prefetch" href="/cypress-examples/assets/js/123.5ae1a059.js"><link rel="prefetch" href="/cypress-examples/assets/js/124.013ecdbf.js"><link rel="prefetch" href="/cypress-examples/assets/js/125.4216010d.js"><link rel="prefetch" href="/cypress-examples/assets/js/126.e048c2d6.js"><link rel="prefetch" href="/cypress-examples/assets/js/127.12a715a9.js"><link rel="prefetch" href="/cypress-examples/assets/js/128.79f807b7.js"><link rel="prefetch" href="/cypress-examples/assets/js/129.d3f2326a.js"><link rel="prefetch" href="/cypress-examples/assets/js/13.22fe2835.js"><link rel="prefetch" href="/cypress-examples/assets/js/130.d8d6c8a8.js"><link rel="prefetch" href="/cypress-examples/assets/js/131.712619ec.js"><link rel="prefetch" href="/cypress-examples/assets/js/132.abecb63c.js"><link rel="prefetch" href="/cypress-examples/assets/js/133.67805b64.js"><link rel="prefetch" href="/cypress-examples/assets/js/134.44ab2444.js"><link rel="prefetch" href="/cypress-examples/assets/js/135.4060a45c.js"><link rel="prefetch" href="/cypress-examples/assets/js/136.8e7765cb.js"><link rel="prefetch" href="/cypress-examples/assets/js/137.c5678e4a.js"><link rel="prefetch" href="/cypress-examples/assets/js/138.1401af33.js"><link rel="prefetch" href="/cypress-examples/assets/js/139.d36510af.js"><link rel="prefetch" href="/cypress-examples/assets/js/14.9f85f943.js"><link rel="prefetch" href="/cypress-examples/assets/js/140.28f0287a.js"><link rel="prefetch" href="/cypress-examples/assets/js/141.b52e098c.js"><link rel="prefetch" href="/cypress-examples/assets/js/142.79261673.js"><link rel="prefetch" href="/cypress-examples/assets/js/143.38b885bc.js"><link rel="prefetch" href="/cypress-examples/assets/js/144.339727a1.js"><link rel="prefetch" href="/cypress-examples/assets/js/145.ca564a36.js"><link rel="prefetch" href="/cypress-examples/assets/js/146.6a3b7ab2.js"><link rel="prefetch" href="/cypress-examples/assets/js/147.7338033a.js"><link rel="prefetch" href="/cypress-examples/assets/js/148.a4c5a626.js"><link rel="prefetch" href="/cypress-examples/assets/js/149.6666d757.js"><link rel="prefetch" href="/cypress-examples/assets/js/15.988f8b40.js"><link rel="prefetch" href="/cypress-examples/assets/js/150.65cc4d6e.js"><link rel="prefetch" href="/cypress-examples/assets/js/151.6a91b376.js"><link rel="prefetch" href="/cypress-examples/assets/js/152.8e6d207f.js"><link rel="prefetch" href="/cypress-examples/assets/js/153.709b641a.js"><link rel="prefetch" href="/cypress-examples/assets/js/154.a9acb1f5.js"><link rel="prefetch" href="/cypress-examples/assets/js/155.8b86310f.js"><link rel="prefetch" href="/cypress-examples/assets/js/156.6a01f989.js"><link rel="prefetch" href="/cypress-examples/assets/js/157.131f2b29.js"><link rel="prefetch" href="/cypress-examples/assets/js/158.078330b2.js"><link rel="prefetch" href="/cypress-examples/assets/js/159.4bc14167.js"><link rel="prefetch" href="/cypress-examples/assets/js/16.df016b36.js"><link rel="prefetch" href="/cypress-examples/assets/js/160.c5a623ed.js"><link rel="prefetch" href="/cypress-examples/assets/js/161.c4eb1ee0.js"><link rel="prefetch" href="/cypress-examples/assets/js/18.4a198296.js"><link rel="prefetch" href="/cypress-examples/assets/js/19.b68ce733.js"><link rel="prefetch" href="/cypress-examples/assets/js/20.fb9562ad.js"><link rel="prefetch" href="/cypress-examples/assets/js/21.235563a4.js"><link rel="prefetch" href="/cypress-examples/assets/js/22.653bfa60.js"><link rel="prefetch" href="/cypress-examples/assets/js/23.7e5c5488.js"><link rel="prefetch" href="/cypress-examples/assets/js/24.430e099c.js"><link rel="prefetch" href="/cypress-examples/assets/js/25.06a9740f.js"><link rel="prefetch" href="/cypress-examples/assets/js/26.36fe88ac.js"><link rel="prefetch" href="/cypress-examples/assets/js/27.c44c148d.js"><link rel="prefetch" href="/cypress-examples/assets/js/28.d9fde844.js"><link rel="prefetch" href="/cypress-examples/assets/js/29.216c84f4.js"><link rel="prefetch" href="/cypress-examples/assets/js/30.b3da4007.js"><link rel="prefetch" href="/cypress-examples/assets/js/31.ac994f14.js"><link rel="prefetch" href="/cypress-examples/assets/js/32.47414c5a.js"><link rel="prefetch" href="/cypress-examples/assets/js/33.244829ae.js"><link rel="prefetch" href="/cypress-examples/assets/js/34.c51b4388.js"><link rel="prefetch" href="/cypress-examples/assets/js/35.de419443.js"><link rel="prefetch" href="/cypress-examples/assets/js/36.bcec03d1.js"><link rel="prefetch" href="/cypress-examples/assets/js/37.4879e2ff.js"><link rel="prefetch" href="/cypress-examples/assets/js/38.8ad483b2.js"><link rel="prefetch" href="/cypress-examples/assets/js/39.5af700e5.js"><link rel="prefetch" href="/cypress-examples/assets/js/4.dd2287f9.js"><link rel="prefetch" href="/cypress-examples/assets/js/40.0bdddd2f.js"><link rel="prefetch" href="/cypress-examples/assets/js/41.f10dc93f.js"><link rel="prefetch" href="/cypress-examples/assets/js/42.3c0d8591.js"><link rel="prefetch" href="/cypress-examples/assets/js/43.655dda6e.js"><link rel="prefetch" href="/cypress-examples/assets/js/44.3a0aa05d.js"><link rel="prefetch" href="/cypress-examples/assets/js/45.f25a9dd7.js"><link rel="prefetch" href="/cypress-examples/assets/js/46.be5c61bc.js"><link rel="prefetch" href="/cypress-examples/assets/js/47.2fd81754.js"><link rel="prefetch" href="/cypress-examples/assets/js/48.6c659abb.js"><link rel="prefetch" href="/cypress-examples/assets/js/49.d8a52469.js"><link rel="prefetch" href="/cypress-examples/assets/js/5.eb9afddf.js"><link rel="prefetch" href="/cypress-examples/assets/js/50.4c19bf8f.js"><link rel="prefetch" href="/cypress-examples/assets/js/51.21826d60.js"><link rel="prefetch" href="/cypress-examples/assets/js/52.282b859f.js"><link rel="prefetch" href="/cypress-examples/assets/js/53.f28d29fd.js"><link rel="prefetch" href="/cypress-examples/assets/js/54.a051a862.js"><link rel="prefetch" href="/cypress-examples/assets/js/55.d89761a0.js"><link rel="prefetch" href="/cypress-examples/assets/js/56.bc931e57.js"><link rel="prefetch" href="/cypress-examples/assets/js/57.d92b36fe.js"><link rel="prefetch" href="/cypress-examples/assets/js/58.268d4544.js"><link rel="prefetch" href="/cypress-examples/assets/js/59.d66677e2.js"><link rel="prefetch" href="/cypress-examples/assets/js/6.b0cf2135.js"><link rel="prefetch" href="/cypress-examples/assets/js/60.3df33224.js"><link rel="prefetch" href="/cypress-examples/assets/js/61.bd7f50b1.js"><link rel="prefetch" href="/cypress-examples/assets/js/62.19ce433d.js"><link rel="prefetch" href="/cypress-examples/assets/js/63.5845964b.js"><link rel="prefetch" href="/cypress-examples/assets/js/64.64548082.js"><link rel="prefetch" href="/cypress-examples/assets/js/65.b681fa85.js"><link rel="prefetch" href="/cypress-examples/assets/js/66.3f006611.js"><link rel="prefetch" href="/cypress-examples/assets/js/67.c452c627.js"><link rel="prefetch" href="/cypress-examples/assets/js/68.a3151449.js"><link rel="prefetch" href="/cypress-examples/assets/js/69.5859141d.js"><link rel="prefetch" href="/cypress-examples/assets/js/7.d1bf3685.js"><link rel="prefetch" href="/cypress-examples/assets/js/70.7c622133.js"><link rel="prefetch" href="/cypress-examples/assets/js/71.e9323813.js"><link rel="prefetch" href="/cypress-examples/assets/js/72.792263e0.js"><link rel="prefetch" href="/cypress-examples/assets/js/73.c7f97776.js"><link rel="prefetch" href="/cypress-examples/assets/js/74.78add3f0.js"><link rel="prefetch" href="/cypress-examples/assets/js/75.cfb8eb58.js"><link rel="prefetch" href="/cypress-examples/assets/js/76.21b24548.js"><link rel="prefetch" href="/cypress-examples/assets/js/77.dcf14146.js"><link rel="prefetch" href="/cypress-examples/assets/js/78.ed372531.js"><link rel="prefetch" href="/cypress-examples/assets/js/79.874acd14.js"><link rel="prefetch" href="/cypress-examples/assets/js/8.4fe3f938.js"><link rel="prefetch" href="/cypress-examples/assets/js/80.53e095e8.js"><link rel="prefetch" href="/cypress-examples/assets/js/81.9c80694c.js"><link rel="prefetch" href="/cypress-examples/assets/js/82.0f51d2bc.js"><link rel="prefetch" href="/cypress-examples/assets/js/83.8c7e078a.js"><link rel="prefetch" href="/cypress-examples/assets/js/84.d25a4869.js"><link rel="prefetch" href="/cypress-examples/assets/js/85.990c2d75.js"><link rel="prefetch" href="/cypress-examples/assets/js/86.9c285f47.js"><link rel="prefetch" href="/cypress-examples/assets/js/87.ad4dc8f7.js"><link rel="prefetch" href="/cypress-examples/assets/js/88.565817ad.js"><link rel="prefetch" href="/cypress-examples/assets/js/89.c0363a49.js"><link rel="prefetch" href="/cypress-examples/assets/js/9.987a9c18.js"><link rel="prefetch" href="/cypress-examples/assets/js/90.3a506145.js"><link rel="prefetch" href="/cypress-examples/assets/js/91.dd1635bd.js"><link rel="prefetch" href="/cypress-examples/assets/js/92.c1d93d6f.js"><link rel="prefetch" href="/cypress-examples/assets/js/93.b188d56b.js"><link rel="prefetch" href="/cypress-examples/assets/js/94.202a0e15.js"><link rel="prefetch" href="/cypress-examples/assets/js/95.ca7c6146.js"><link rel="prefetch" href="/cypress-examples/assets/js/96.b296c035.js"><link rel="prefetch" href="/cypress-examples/assets/js/97.1dbb7799.js"><link rel="prefetch" href="/cypress-examples/assets/js/98.3c09b0d9.js"><link rel="prefetch" href="/cypress-examples/assets/js/99.68d1679b.js"><link rel="prefetch" href="/cypress-examples/assets/js/vendors~docsearch.83d4d6ef.js">
    <link rel="stylesheet" href="/cypress-examples/assets/css/0.styles.82419979.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cypress-examples/" class="home-link router-link-active"><!----> <span class="site-name">Cypress examples (v12.5.0)</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Connectors</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cypress-examples/commands/connectors.html#each" class="sidebar-link">.each()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#iterate-over-numbers-using-cy-each" class="sidebar-link">Iterate over numbers using cy.each</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#cy-each-yields-the-original-value" class="sidebar-link">cy.each yields the original value</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#put-complex-logic-into-each-callback" class="sidebar-link">Put complex logic into each callback</a></li></ul></li><li><a href="/cypress-examples/commands/connectors.html#its" class="sidebar-link">.its()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#array-index" class="sidebar-link">Array index</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#retries-automatically" class="sidebar-link">Retries automatically</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#nested-properties" class="sidebar-link">Nested properties</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#jquery-to-dom-element" class="sidebar-link">jQuery to DOM element</a></li></ul></li><li><a href="/cypress-examples/commands/connectors.html#invoke" class="sidebar-link">.invoke()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#invoke-asynchronous-method" class="sidebar-link">Invoke asynchronous method</a></li></ul></li><li><a href="/cypress-examples/commands/connectors.html#spread" class="sidebar-link">.spread()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#spread-an-array" class="sidebar-link">Spread an array</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#spread-dom-elements" class="sidebar-link">Spread DOM elements</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#spread-network-intercepts" class="sidebar-link">Spread network intercepts</a></li></ul></li><li><a href="/cypress-examples/commands/connectors.html#then" class="sidebar-link">.then()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#synchronous-callback" class="sidebar-link">Synchronous callback</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#use-promises" class="sidebar-link">Use promises</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#use-async-syntax" class="sidebar-link">Use async syntax</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#return-a-value" class="sidebar-link">Return a value</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#keep-the-current-subject" class="sidebar-link">Keep the current subject</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#cypress-commands-inside-the-callback" class="sidebar-link">Cypress commands inside the callback</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#callback-should-return-a-promise" class="sidebar-link">Callback should return a promise</a></li><li class="sidebar-sub-header"><a href="/cypress-examples/commands/connectors.html#start-command-chain-with-a-promise" class="sidebar-link">Start command chain with a promise</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="connectors"><a href="#connectors" class="header-anchor">#</a> Connectors</h1> <p>Examples of connecting commands in Cypress, for a full reference of commands, go to <a href="https://on.cypress.io/api" target="_blank" rel="noopener noreferrer">docs.cypress.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="each"><a href="#each" class="header-anchor">#</a> <a href="https://on.cypress.io/each" target="_blank" rel="noopener noreferrer">.each()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To iterate over the elements of a current subject, use the <code>.each()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>connectors-each-ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Lara Williams<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>William Grey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Monica Pharrel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ul class="connectors-each-ul"><li>Lara Williams</li> <li>William Grey</li> <li>Monica Pharrel</li></ul></div></div><div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.connectors-each-ul&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>
  <span class="token parameter">$el<span class="token punctuation">,</span>
  index<span class="token punctuation">,</span>
  $list<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$el<span class="token punctuation">,</span> index<span class="token punctuation">,</span> $list<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="iterate-over-numbers-using-cy-each"><a href="#iterate-over-numbers-using-cy-each" class="header-anchor">#</a> Iterate over numbers using cy.each</h3> <p>You can iterate over array elements using <code>cy.each</code></p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>and<span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>and<span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="cy-each-yields-the-original-value"><a href="#cy-each-yields-the-original-value" class="header-anchor">#</a> cy.each yields the original value</h3> <p>The values returned from the <code>cy.each(callback)</code> do not affect the value yielded after the iterations. The original value is yielded to the next command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> number <span class="token operator">*</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// the same array reference is yielded</span>
  <span class="token comment">// to the next assertion</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span>
</code></pre></div> <p>For more <code>cy.each</code> examples, see the <a href="/cypress-examples/recipes/each-example.html">cy.each recipe</a> and <a href="/cypress-examples/recipes/collect-headings.html">Collect Headings recipe</a>.</p> <h3 id="put-complex-logic-into-each-callback"><a href="#put-complex-logic-into-each-callback" class="header-anchor">#</a> Put complex logic into each callback</h3> <p>Let's say that we want to confirm that each element in the list has the text content <code>Item &lt;index&gt;</code> where the index starts with 1, and the tooltip attribute is <code>Click me</code>.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Click me<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Item: 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Click me<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Item: 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Click me<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Item: 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ul class="items"><li title="Click me">Item: 1</li> <li title="Click me">Item: 2</li> <li title="Click me">Item: 3</li></ul></div></div><div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.items&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> index<span class="token punctuation">,</span> $list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>$el<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.text'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Item: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">'have.attr'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'Click me'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h2 id="its"><a href="#its" class="header-anchor">#</a> <a href="https://on.cypress.io/its" target="_blank" rel="noopener noreferrer">.its()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To get the properties on the current subject, use the <code>.its()</code> command. For example, if the subject is the list of found elements, we can grab its <code>length</code> property and use it in the assertion:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>connectors-its-ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Chai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Chai-jQuery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Chai-Sinon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ul class="connectors-its-ul"><li>Chai</li> <li>Chai-jQuery</li> <li>Chai-Sinon</li></ul></div></div><div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.connectors-its-ul&gt;li'</span><span class="token punctuation">)</span>
  <span class="token comment">// calls the 'length' property returning that value</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.gt'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// tip: this is an equivalent assertion</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.connectors-its-ul&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.length.gt'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="array-index"><a href="#array-index" class="header-anchor">#</a> Array index</h3> <p>When dealing with a collection, like an Array or a jQuery object, you can pass an index to get a single item.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'there'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// index starts with 0, so we will get</span>
  <span class="token comment">// the second item in the array</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">)</span>
</code></pre></div> <p>See also <a href="/cypress-examples/recipes/last-item.html">get the last item</a> recipe.</p> <h3 id="retries-automatically"><a href="#retries-automatically" class="header-anchor">#</a> Retries automatically</h3> <p>The <code>cy.its</code> command retries finding the property until the property exists or the command times out. You can control the retry period by setting an explicit <code>timeout</code> parameter. For example, when checking a response from the <code>cy.request</code> command, the subject cannot change, thus you can safely use <code>cy.its('property', {timeout: 0})</code> option.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>appCustomField <span class="token operator">=</span> <span class="token number">42</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><script>
  setTimeout(function () {
    window.appCustomField = 42
  }, 1000)
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// the following chain of commands checks the &quot;window&quot; object</span>
<span class="token comment">// again and again until the application sets the property &quot;appCustomField&quot;</span>
<span class="token comment">// The value of the property is yielded to the assertion</span>
cy<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'appCustomField'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
<span class="token comment">// tip: alternative solution using a single assertion</span>
<span class="token comment">// (which cannot have nested paths compared to the cy.its command)</span>
cy<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span>
  <span class="token string">'have.property'</span><span class="token punctuation">,</span>
  <span class="token string">'appCustomField'</span><span class="token punctuation">,</span>
  <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token string">'property added'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Sometimes we do not need the automatic retries. For example, the result of <code>cy.request</code> will never change. To avoid unnecessary retries and waiting, we can set the timeout to zero for the <code>cy.its</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// We can avoid unnecessary retries when getting the property</span>
<span class="token comment">// using the &quot;timeout: 0&quot; option</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/users/1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> timeout<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'include.keys'</span><span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'email'</span><span class="token punctuation">)</span>
</code></pre></div> <p>For more, read the <a href="https://on.cypress.io/retry-ability" target="_blank" rel="noopener noreferrer">Cypress retry-ability guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and watch <a href="https://youtu.be/2LdVcnYAE7Q" target="_blank" rel="noopener noreferrer">The cy.its Command Examples With Retries And Without<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="nested-properties"><a href="#nested-properties" class="header-anchor">#</a> Nested properties</h3> <p>Under the hood, <code>.its</code> uses Lodash <code>_.property</code> method, thus you can grab the nested values using dot notation:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span>
    first<span class="token operator">:</span> <span class="token string">'Joe'</span><span class="token punctuation">,</span>
    last<span class="token operator">:</span> <span class="token string">'Smith'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  organizationIds<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'Acme, inc'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'IEEE'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
  <span class="token comment">// grab nested property using &quot;.&quot; notation</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'name.first'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'Joe'</span><span class="token punctuation">)</span>
<span class="token comment">// the dot notation works with arrays</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'organizationIds.1.name'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'IEEE'</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="jquery-to-dom-element"><a href="#jquery-to-dom-element" class="header-anchor">#</a> jQuery to DOM element</h3> <p>All Cypress <a href="/cypress-examples/commands/querying.html">querying commands</a> yield a jQuery object. You can get the individual DOM elements in several ways.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fruits<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Apples<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Pears<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Bananas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ol id="fruits"><li>Apples</li> <li>Pears</li> <li>Bananas</li></ol></div></div><p>Method 1: use a nested <code>cy.its</code> property</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// yields a jQuery object with 3 elements</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#fruits li'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'have.length'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token comment">// jQuery element access by index [1]</span>
  <span class="token comment">// yields a DOM element, and then we access</span>
  <span class="token comment">// its property &quot;innerText&quot;</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'1.innerText'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'Pears'</span><span class="token punctuation">)</span>
</code></pre></div><p>Method 2: use the <code>cy.eq</code> and <code>cy.invoke</code> commands</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// equivalent to the combination of commands</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#fruits li'</span><span class="token punctuation">)</span>
  <span class="token comment">// yields the jQuery element at index 1</span>
  <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment">// invokes the jQuery method text()</span>
  <span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'Pears'</span><span class="token punctuation">)</span>
</code></pre></div><p>Method 3: invoke the jQuery <code>get(index)</code> method</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// instead of &quot;.its&quot; or &quot;.eq&quot; commands</span>
<span class="token comment">// we can call the jQuery method &quot;get(index)&quot;</span>
<span class="token comment">// to yield a single jQuery element</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#fruits li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Note:</strong> invoking the jQuery <code>get(index)</code> method should yield a plain DOM element, but Cypress automatically wraps DOM elements in a jQuery object when yielding to the next command or assertion. Thus we use the <code>cy.invoke('text')</code> command</p> <h2 id="invoke"><a href="#invoke" class="header-anchor">#</a> <a href="https://on.cypress.io/invoke" target="_blank" rel="noopener noreferrer">.invoke()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To invoke a function on a current subject, use the <code>.invoke()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>connectors-div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>This is a div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// hide this div so we can invoke show later</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.connectors-div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><div class="connectors-div">This is a div</div> <script>
  // hide this div so we can invoke show later
  $('.connectors-div').hide()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.connectors-div'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.hidden'</span><span class="token punctuation">)</span>
  <span class="token comment">// call the jquery method 'show' on the 'div.container'</span>
  <span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.visible'</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="invoke-asynchronous-method"><a href="#invoke-asynchronous-method" class="header-anchor">#</a> Invoke asynchronous method</h3> <p>If the method returns a Promise, <code>cy.invoke</code> automatically waits for it. <strong>But</strong> if you need the resolved value, you need to use <code>cy.then</code> to invoke the method instead 🤯</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>connectors-div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>This is a div<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// application adds its instance to the &quot;window&quot;</span>
  window<span class="token punctuation">.</span>app <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">fetchName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'My App'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><div class="connectors-div">This is a div</div> <script>
  // application adds its instance to the &quot;window&quot;
  window.app = {
    fetchName() {
      return new Promise((resolve) =&gt; {
        setTimeout(() =&gt; {
          resolve('My App')
        }, 1000)
      })
    },
  }
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// wait for the &quot;app.fetchName&quot; to finish</span>
cy<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'fetchName'</span><span class="token punctuation">)</span>
</code></pre></div><p>If we want to confirm the resolved value, have to call the method ourselves</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> app<span class="token punctuation">.</span><span class="token function">fetchName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'My App'</span><span class="token punctuation">)</span>
</code></pre></div><p>Or we can insert an truthy assertion and get the resolved value later</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'fetchName'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.ok'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">expect</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'My App'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div> <p><strong>Tip:</strong> use <a href="https://github.com/bahmutov/cypress-map" target="_blank" rel="noopener noreferrer">cypress-map<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin which has <code>cy.invokeOnce</code> method that waits for asynchronous methods by default and yields the resolved value.</p> <h2 id="spread"><a href="#spread" class="header-anchor">#</a> <a href="https://on.cypress.io/spread" target="_blank" rel="noopener noreferrer">.spread()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <h3 id="spread-an-array"><a href="#spread-an-array" class="header-anchor">#</a> Spread an array</h3> <p>To spread an array as individual arguments to a callback function, use the <code>.spread()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">]</span>

cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="spread-dom-elements"><a href="#spread-dom-elements" class="header-anchor">#</a> Spread DOM elements</h3> <p>If the previous command yields a jQuery object, it can be spread into individual DOM elements.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>friends<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>The best friend<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Childhood friend<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>An acquaintance<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ol id="friends"><li>The best friend</li> <li>Childhood friend</li> <li>An acquaintance</li></ol></div></div><div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#friends li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">top<span class="token punctuation">,</span> middle<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// each argument here is a DOM element</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>Cypress<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">isElement</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>Cypress<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">isElement</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>Cypress<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">isElement</span><span class="token punctuation">(</span>last<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token comment">// we can confirm the element's properties</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> <span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'The best friend'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>middle<span class="token punctuation">,</span> <span class="token string">'middle'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>include<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Childhood'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>last<span class="token punctuation">.</span>innerText<span class="token punctuation">,</span> <span class="token string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^An acq/</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="spread-network-intercepts"><a href="#spread-network-intercepts" class="header-anchor">#</a> Spread network intercepts</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>load-resources<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Load resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  document
    <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'load-resources'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// the application requests multiple resources</span>
      <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">'/users/1'</span><span class="token punctuation">)</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">'/users/2'</span><span class="token punctuation">)</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">'/users/3'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button id="load-resources">Load resources</button> <script>
  document
    .getElementById('load-resources')
    .addEventListener('click', function () {
      // the application requests multiple resources
      const root = 'https://jsonplaceholder.cypress.io'
      fetch(root + '/users/1')
      fetch(root + '/users/2')
      fetch(root + '/users/3')
    })
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// spy on multiple network requests</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/users/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/users/2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/users/3'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'third'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'#load-resources'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// wait for the intercepts and spread them into individual arguments</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@first'</span><span class="token punctuation">,</span> <span class="token string">'@second'</span><span class="token punctuation">,</span> <span class="token string">'@third'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> third</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>second<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>third<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
      <span class="token comment">// make sure we log the results first</span>
      <span class="token comment">// before making assertions</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'first'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\/1$/</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>second<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\/2$/</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>third<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'third'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\/3$/</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div> <h2 id="then"><a href="#then" class="header-anchor">#</a> <a href="https://on.cypress.io/then" target="_blank" rel="noopener noreferrer">.then()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>The <code>cy.then</code> command is a very interesting and controversial topic. In my opinion, it is a very powerful and useful command, but it should <a href="https://glebbahmutov.com/blog/replace-and-remove-cy-then-command/" target="_blank" rel="noopener noreferrer">have been called something else<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, like <code>cy.later</code>. Anyway, here is how you can use <code>cy.then</code> in your specs.</p> <h3 id="synchronous-callback"><a href="#synchronous-callback" class="header-anchor">#</a> Synchronous callback</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>connectors-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Walk the dog<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Feed the cat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Write JavaScript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><ul class="connectors-list"><li>Walk the dog</li> <li>Feed the cat</li> <li>Write JavaScript</li></ul></div></div><p>To invoke a callback function with the current subject, use the <code>.then()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'**Callback**'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.connectors-list&gt;li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$lis</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>$lis<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>$lis<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token string">'Walk the dog'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>$lis<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token string">'Feed the cat'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>$lis<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token string">'Write JavaScript'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="use-promises"><a href="#use-promises" class="header-anchor">#</a> Use promises</h3> <p>If the <code>cy.then(callback)</code> function returns a Promise, Cypress automatically yields the resolved value to the next command or assertion. If that promise is rejected, then the test fails.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// yields the resolved value</span>
  <span class="token comment">// after 1 second</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'done'</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="use-async-syntax"><a href="#use-async-syntax" class="header-anchor">#</a> Use async syntax</h3> <p>Here is the truth. The following <code>async</code> and <code>return new Promise</code> are equivalent, so you can use <code>async</code> callbacks with <code>cy.then</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// yields the resolved value</span>
  <span class="token comment">// after 1.5 second</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'done'</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="return-a-value"><a href="#return-a-value" class="header-anchor">#</a> Return a value</h3> <p>If the callback function returns a value, it is yielded to the next callback, just like in a Promise callback.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'**Return value**'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="keep-the-current-subject"><a href="#keep-the-current-subject" class="header-anchor">#</a> Keep the current subject</h3> <p>But unlike a Promise, if <code>undefined</code> is returned, then the original value passed into the <code>.then(cb)</code> is yielded to the next callback.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'**Returning undefined**'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// note that nothing is returned from this callback</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// this callback receives the original unchanged value 1</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>This is very useful when logging the current subject to the DevTools using <code>console.log</code></p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
  <span class="token comment">// passes the subject to console.log</span>
  <span class="token comment">// which returns undefined</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token comment">// yields the original subject</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'equal'</span><span class="token punctuation">,</span> <span class="token string">'Hello'</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="cypress-commands-inside-the-callback"><a href="#cypress-commands-inside-the-callback" class="header-anchor">#</a> Cypress commands inside the callback</h3> <p>If there are Cypress commands in the <code>.then(cb)</code> callback, then the value yielded by the last command will be passed to the next callback.</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'**Returning wrapped value**'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// note how we run a Cypress command</span>
    <span class="token comment">// the result yielded by this Cypress command</span>
    <span class="token comment">// will be passed to the second &quot;.then&quot;</span>
    cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// this callback receives the value yielded by &quot;cy.wrap(2)&quot;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h3 id="callback-should-return-a-promise"><a href="#callback-should-return-a-promise" class="header-anchor">#</a> Callback should return a promise</h3> <p>⚠️ There is one big warning that you should be aware when using Promises in JavaScript (not just with Cypress). Because <a href="https://glebbahmutov.com/blog/difference-between-promise-and-task/" target="_blank" rel="noopener noreferrer">promises are eager<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, then start running immediately when created. Let's take the following utility functions.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">printWithDelay</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before: %s'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
  <span class="token keyword">return</span> message
<span class="token punctuation">}</span>
</code></pre></div><p>What do you think you will see in the DevTools Console when the following test runs?</p> <div class="language-js extra-class"><pre class="language-js"><code>cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">'Promise me'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token function">printWithDelay</span><span class="token punctuation">(</span><span class="token string">'Yup'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
</code></pre></div><p>You will see</p> <div class="language- extra-class"><pre class="language-text"><code>before: Yup
Promise me
Yup
Yup
</code></pre></div><p>The order is strange. The <code>before: Yup</code> is printed <em>before</em> Cypress even queues its commands and starts running them. We call <code>printWithDelay('Yup', 1000)</code> and this immediately executes. Thus you see</p> <div class="language- extra-class"><pre class="language-text"><code>before: Yup
</code></pre></div><p>Then the <code>cy.wrap('Promise me').then(console.log)</code> executes and prints</p> <div class="language- extra-class"><pre class="language-text"><code>before: Yup
Promise me
</code></pre></div><p>Then Cypress command at this point is executing <code>cy.wait(2000)</code>. At some point the <code>setTimeout</code> inside <code>delay</code> fires, and <code>printWithDelay</code> prints</p> <div class="language- extra-class"><pre class="language-text"><code>before: Yup
Promise me
Yup
</code></pre></div><p>Notice how <code>cy.wrap</code> correctly takes already resolved promise and yields its return value to the last <code>.then(console.log)</code> printing the last <code>Yup</code>.</p> <p>⚠️ The lesson here is: do not put promises into the Cypress commands, put callbacks that return a promise. Then the async functions will run in order with the normal Cypress commands.</p> <h3 id="start-command-chain-with-a-promise"><a href="#start-command-chain-with-a-promise" class="header-anchor">#</a> Start command chain with a promise</h3> <p>If you want to wait for a promise <em>at the start of the test</em>, use <code>cy.then(callback)</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">printWithDelay</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before: %s'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
  <span class="token keyword">return</span> message
<span class="token punctuation">}</span>

cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">'test start'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">printWithDelay</span><span class="token punctuation">(</span><span class="token string">'first cy.then'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'second cy.then'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>This prints the log messages as expected, here I am including the timestamps</p> <div class="language- extra-class"><pre class="language-text"><code>11:23:16.573 test start
11:23:16.574 before: first cy.then
11:23:17.575 first cy.then
11:23:17.576 second cy.then
</code></pre></div><p>The <code>printWithDelay</code> starts <em>after</em> the command chain <code>cy.wrap('test start').then(console.log)</code> finishes.</p> <p><strong>Tip:</strong> you can place your async code into <code>beforeEach</code> hook. The test runner automatically waits for the hooks to finish before starting the tests.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bahmutov/cypress-examples/edit/master/docs/commands/connectors.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cypress-examples/assets/js/app.874ff1b6.js" defer></script><script src="/cypress-examples/assets/js/3.be46aa5a.js" defer></script><script src="/cypress-examples/assets/js/17.1eb3937e.js" defer></script>
  </body>
</html>
